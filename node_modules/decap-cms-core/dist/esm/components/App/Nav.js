"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _base = _interopRequireDefault(require("@emotion/styled/base"));
var _react = _interopRequireWildcard(require("react"));
var _reactPolyglot = require("react-polyglot");
var _reactRouterDom = require("react-router-dom");
var _decapCmsUiNext = require("decap-cms-ui-next");
var _react2 = require("@emotion/react");
function _getRequireWildcardCache(e) { if ("function" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }
function _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || "object" != typeof e && "function" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if ("default" !== u && Object.prototype.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function _EMOTION_STRINGIFIED_CSS_ERROR__() { return "You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop)."; }
const StyledLogo = /*#__PURE__*/(0, _base.default)(_decapCmsUiNext.Logo, {
  target: "ekb14df0",
  label: "StyledLogo"
})(process.env.NODE_ENV === "production" ? {
  name: "scm4ng",
  styles: "padding:0.375rem"
} : {
  name: "scm4ng",
  styles: "padding:0.375rem",
  map: "/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL0FwcC9OYXYuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQU0rQiIsImZpbGUiOiIuLi8uLi8uLi8uLi9zcmMvY29tcG9uZW50cy9BcHAvTmF2LmpzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdHJhbnNsYXRlIH0gZnJvbSAncmVhY3QtcG9seWdsb3QnO1xuaW1wb3J0IHsgTmF2TGluayBhcyBSZWFjdFJvdXRlck5hdkxpbmssIHVzZUxvY2F0aW9uIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5pbXBvcnQgc3R5bGVkIGZyb20gJ0BlbW90aW9uL3N0eWxlZCc7XG5pbXBvcnQgeyBOYXZNZW51LCBOYXZNZW51SXRlbSwgTmF2TWVudUdyb3VwLCBOYXZNZW51R3JvdXBMYWJlbCwgTG9nbyB9IGZyb20gJ2RlY2FwLWNtcy11aS1uZXh0JztcblxuY29uc3QgU3R5bGVkTG9nbyA9IHN0eWxlZChMb2dvKWBcbiAgcGFkZGluZzogMC4zNzVyZW07XG5gO1xuXG5mdW5jdGlvbiBOYXYoe1xuICBjb2xsZWN0aW9ucyxcbiAgb3Blbk1lZGlhTGlicmFyeSxcbiAgc2hvd01lZGlhQnV0dG9uLFxuICBoYXNXb3JrZmxvdyxcbiAgc2l0ZVVybCxcbiAgZGlzcGxheVVybCxcbiAgbG9nb1VybCxcbiAgdCxcbn0pIHtcbiAgY29uc3QgeyBwYXRobmFtZSB9ID0gdXNlTG9jYXRpb24oKTtcblxuICBjb25zdCB7IGFjdGl2ZU5hdkxpbmtJZCB9ID0gdXNlTWVtbygoKSA9PiB7XG4gICAgY29uc3QgcGF0aG5hbWVBcnJheSA9IHBhdGhuYW1lLnNwbGl0KCcvJyk7XG5cbiAgICBpZiAocGF0aG5hbWVBcnJheS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB7IGFjdGl2ZU5hdkxpbmtJZDogJ2Rhc2hib2FyZCcgfTtcbiAgICB9XG5cbiAgICBpZiAocGF0aG5hbWVBcnJheVsxXSA9PT0gJ2NvbGxlY3Rpb25zJykge1xuICAgICAgcmV0dXJuIHsgYWN0aXZlTmF2TGlua0lkOiBgY29sbGVjdGlvbnMtJHtwYXRobmFtZUFycmF5WzJdfWAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBhY3RpdmVOYXZMaW5rSWQ6IHBhdGhuYW1lQXJyYXlbMV0gfTtcbiAgfSwgW3BhdGhuYW1lXSk7XG5cbiAgY29uc3Qgc3RhcnRDb2xsZWN0aW9ucyA9IGNvbGxlY3Rpb25zXG4gICAgLmZpbHRlcihjb2xsZWN0aW9uID0+IGNvbGxlY3Rpb24uZ2V0KCdwb3NpdGlvbicpICE9PSAnZW5kJylcbiAgICAudG9MaXN0KCk7XG4gIGNvbnN0IGVuZENvbGxlY3Rpb25zID0gY29sbGVjdGlvbnNcbiAgICAuZmlsdGVyKGNvbGxlY3Rpb24gPT4gY29sbGVjdGlvbi5nZXQoJ3Bvc2l0aW9uJykgPT09ICdlbmQnKVxuICAgIC50b0xpc3QoKTtcblxuICBmdW5jdGlvbiBpc0V4dGVybmFsUmVzb3VyY2UoY29sbGVjdGlvbikge1xuICAgIHJldHVybiBjb2xsZWN0aW9uLmdldCgndXJsJyk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxOYXZNZW51IGNvbGxhcHNhYmxlPXt0cnVlfT5cbiAgICAgIDxOYXZNZW51SXRlbSBocmVmPXtzaXRlVXJsfSB0YXJnZXQ9XCJfYmxhbmtcIiBpY29uPXs8U3R5bGVkTG9nbyBzcmM9e2xvZ29Vcmx9IC8+fT5cbiAgICAgICAgTXkgV2Vic2l0ZVxuICAgICAgPC9OYXZNZW51SXRlbT5cblxuICAgICAgPE5hdk1lbnVHcm91cD5cbiAgICAgICAgPE5hdk1lbnVJdGVtXG4gICAgICAgICAgYXM9e1JlYWN0Um91dGVyTmF2TGlua31cbiAgICAgICAgICB0bz17Jy9kYXNoYm9hcmQnfVxuICAgICAgICAgIGFjdGl2ZT17YWN0aXZlTmF2TGlua0lkID09PSAnZGFzaGJvYXJkJ31cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBmYWxzZX1cbiAgICAgICAgICBpY29uPVwibGF5b3V0XCJcbiAgICAgICAgPlxuICAgICAgICAgIERhc2hib2FyZFxuICAgICAgICA8L05hdk1lbnVJdGVtPlxuXG4gICAgICAgIHtoYXNXb3JrZmxvdyAmJiAoXG4gICAgICAgICAgPE5hdk1lbnVJdGVtXG4gICAgICAgICAgICBhcz17UmVhY3RSb3V0ZXJOYXZMaW5rfVxuICAgICAgICAgICAgdG89eycvd29ya2Zsb3cnfVxuICAgICAgICAgICAgYWN0aXZlPXthY3RpdmVOYXZMaW5rSWQgPT09ICd3b3JrZmxvdyd9XG4gICAgICAgICAgICBpY29uPVwid29ya2Zsb3dcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIHt0KCdhcHAuaGVhZGVyLndvcmtmbG93Jyl9XG4gICAgICAgICAgPC9OYXZNZW51SXRlbT5cbiAgICAgICAgKX1cblxuICAgICAgICB7c2hvd01lZGlhQnV0dG9uICYmIChcbiAgICAgICAgICA8TmF2TWVudUl0ZW1cbiAgICAgICAgICAgIGFzPXtSZWFjdFJvdXRlck5hdkxpbmt9XG4gICAgICAgICAgICB0bz17Jy9tZWRpYSd9XG4gICAgICAgICAgICBhY3RpdmU9e2FjdGl2ZU5hdkxpbmtJZCA9PT0gJ21lZGlhJ31cbiAgICAgICAgICAgIG9uQ2xpY2s9e29wZW5NZWRpYUxpYnJhcnl9XG4gICAgICAgICAgICBpY29uPVwiaW1hZ2VcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIE1lZGlhXG4gICAgICAgICAgPC9OYXZNZW51SXRlbT5cbiAgICAgICAgKX1cbiAgICAgIDwvTmF2TWVudUdyb3VwPlxuXG4gICAgICA8TmF2TWVudUdyb3VwPlxuICAgICAgICA8TmF2TWVudUdyb3VwTGFiZWw+e3QoJ2NvbGxlY3Rpb24uc2lkZWJhci5jb2xsZWN0aW9ucycpfTwvTmF2TWVudUdyb3VwTGFiZWw+XG5cbiAgICAgICAge3N0YXJ0Q29sbGVjdGlvbnMubWFwKGNvbGxlY3Rpb24gPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbGxlY3Rpb25OYW1lID0gY29sbGVjdGlvbi5nZXQoJ25hbWUnKTtcblxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8TmF2TWVudUl0ZW1cbiAgICAgICAgICAgICAgYXM9e1JlYWN0Um91dGVyTmF2TGlua31cbiAgICAgICAgICAgICAgdG89e2AvY29sbGVjdGlvbnMvJHtjb2xsZWN0aW9uTmFtZX1gfVxuICAgICAgICAgICAgICBrZXk9e2Bjb2xsZWN0aW9ucy0ke2NvbGxlY3Rpb25OYW1lfWB9XG4gICAgICAgICAgICAgIGFjdGl2ZT17YWN0aXZlTmF2TGlua0lkID09PSBgY29sbGVjdGlvbnMtJHtjb2xsZWN0aW9uTmFtZX1gfVxuICAgICAgICAgICAgICBpY29uPXtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uLmdldCgnaWNvbicpID8/XG4gICAgICAgICAgICAgICAgKGNvbGxlY3Rpb24uZ2V0KCd0eXBlJykgPT09ICdmaWxlX2Jhc2VkX2NvbGxlY3Rpb24nID8gJ2ZpbGUnIDogJ2ZvbGRlcicpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge2NvbGxlY3Rpb24uZ2V0KCdsYWJlbCcpfVxuICAgICAgICAgICAgPC9OYXZNZW51SXRlbT5cbiAgICAgICAgICApO1xuICAgICAgICB9KX1cbiAgICAgIDwvTmF2TWVudUdyb3VwPlxuXG4gICAgICA8TmF2TWVudUdyb3VwIGVuZD5cbiAgICAgICAge2VuZENvbGxlY3Rpb25zLm1hcChjb2xsZWN0aW9uID0+IHtcbiAgICAgICAgICBjb25zdCBjb2xsZWN0aW9uTmFtZSA9IGNvbGxlY3Rpb24uZ2V0KCduYW1lJyk7XG5cbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPE5hdk1lbnVJdGVtXG4gICAgICAgICAgICAgIGFzPXtpc0V4dGVybmFsUmVzb3VyY2UoY29sbGVjdGlvbikgPyBudWxsIDogUmVhY3RSb3V0ZXJOYXZMaW5rfVxuICAgICAgICAgICAgICBocmVmPXtpc0V4dGVybmFsUmVzb3VyY2UoY29sbGVjdGlvbikgPyBjb2xsZWN0aW9uLmdldCgndXJsJykgOiBudWxsfVxuICAgICAgICAgICAgICB0bz17YC9jb2xsZWN0aW9ucy8ke2NvbGxlY3Rpb25OYW1lfWB9XG4gICAgICAgICAgICAgIGtleT17YGNvbGxlY3Rpb25zLSR7Y29sbGVjdGlvbk5hbWV9YH1cbiAgICAgICAgICAgICAgYWN0aXZlPXthY3RpdmVOYXZMaW5rSWQgPT09IGBjb2xsZWN0aW9ucy0ke2NvbGxlY3Rpb25OYW1lfWB9XG4gICAgICAgICAgICAgIGljb249e1xuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb24uZ2V0KCdpY29uJykgPz9cbiAgICAgICAgICAgICAgICAoY29sbGVjdGlvbi5nZXQoJ3R5cGUnKSA9PT0gJ2ZpbGVfYmFzZWRfY29sbGVjdGlvbicgPyAnZmlsZScgOiAnZm9sZGVyJylcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7Y29sbGVjdGlvbi5nZXQoJ2xhYmVsJyl9XG4gICAgICAgICAgICA8L05hdk1lbnVJdGVtPlxuICAgICAgICAgICk7XG4gICAgICAgIH0pfVxuICAgICAgPC9OYXZNZW51R3JvdXA+XG4gICAgPC9OYXZNZW51PlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCB0cmFuc2xhdGUoKShOYXYpO1xuIl19 */",
  toString: _EMOTION_STRINGIFIED_CSS_ERROR__
});
function Nav({
  collections,
  openMediaLibrary,
  showMediaButton,
  hasWorkflow,
  siteUrl,
  displayUrl,
  logoUrl,
  t
}) {
  const {
    pathname
  } = (0, _reactRouterDom.useLocation)();
  const {
    activeNavLinkId
  } = (0, _react.useMemo)(() => {
    const pathnameArray = pathname.split('/');
    if (pathnameArray.length === 0) {
      return {
        activeNavLinkId: 'dashboard'
      };
    }
    if (pathnameArray[1] === 'collections') {
      return {
        activeNavLinkId: `collections-${pathnameArray[2]}`
      };
    }
    return {
      activeNavLinkId: pathnameArray[1]
    };
  }, [pathname]);
  const startCollections = collections.filter(collection => collection.get('position') !== 'end').toList();
  const endCollections = collections.filter(collection => collection.get('position') === 'end').toList();
  function isExternalResource(collection) {
    return collection.get('url');
  }
  return (0, _react2.jsx)(_decapCmsUiNext.NavMenu, {
    collapsable: true
  }, (0, _react2.jsx)(_decapCmsUiNext.NavMenuItem, {
    href: siteUrl,
    target: "_blank",
    icon: (0, _react2.jsx)(StyledLogo, {
      src: logoUrl
    })
  }, "My Website"), (0, _react2.jsx)(_decapCmsUiNext.NavMenuGroup, null, (0, _react2.jsx)(_decapCmsUiNext.NavMenuItem, {
    as: _reactRouterDom.NavLink,
    to: '/dashboard',
    active: activeNavLinkId === 'dashboard',
    onClick: () => false,
    icon: "layout"
  }, "Dashboard"), hasWorkflow && (0, _react2.jsx)(_decapCmsUiNext.NavMenuItem, {
    as: _reactRouterDom.NavLink,
    to: '/workflow',
    active: activeNavLinkId === 'workflow',
    icon: "workflow"
  }, t('app.header.workflow')), showMediaButton && (0, _react2.jsx)(_decapCmsUiNext.NavMenuItem, {
    as: _reactRouterDom.NavLink,
    to: '/media',
    active: activeNavLinkId === 'media',
    onClick: openMediaLibrary,
    icon: "image"
  }, "Media")), (0, _react2.jsx)(_decapCmsUiNext.NavMenuGroup, null, (0, _react2.jsx)(_decapCmsUiNext.NavMenuGroupLabel, null, t('collection.sidebar.collections')), startCollections.map(collection => {
    var _collection$get;
    const collectionName = collection.get('name');
    return (0, _react2.jsx)(_decapCmsUiNext.NavMenuItem, {
      as: _reactRouterDom.NavLink,
      to: `/collections/${collectionName}`,
      key: `collections-${collectionName}`,
      active: activeNavLinkId === `collections-${collectionName}`,
      icon: (_collection$get = collection.get('icon')) !== null && _collection$get !== void 0 ? _collection$get : collection.get('type') === 'file_based_collection' ? 'file' : 'folder'
    }, collection.get('label'));
  })), (0, _react2.jsx)(_decapCmsUiNext.NavMenuGroup, {
    end: true
  }, endCollections.map(collection => {
    var _collection$get2;
    const collectionName = collection.get('name');
    return (0, _react2.jsx)(_decapCmsUiNext.NavMenuItem, {
      as: isExternalResource(collection) ? null : _reactRouterDom.NavLink,
      href: isExternalResource(collection) ? collection.get('url') : null,
      to: `/collections/${collectionName}`,
      key: `collections-${collectionName}`,
      active: activeNavLinkId === `collections-${collectionName}`,
      icon: (_collection$get2 = collection.get('icon')) !== null && _collection$get2 !== void 0 ? _collection$get2 : collection.get('type') === 'file_based_collection' ? 'file' : 'folder'
    }, collection.get('label'));
  })));
}
var _default = exports.default = (0, _reactPolyglot.translate)()(Nav);